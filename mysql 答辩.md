# 答辩题

1  事务的四个特性

```mysql
#事务具有四个特性：
1 原子性
2 一致性
3 隔离性
4 持久性。
```



2  数据库系统有哪几部分组成？

```mysql
#数据库系统由
1 计算机硬件

2 数据库
3 数据库管理系统(及其开发工具)(DBMS)
4 数据库应用系统

5 数据库用户构成。
```



3  查看用户连接信息的函数

```mysql
show processlist;
```



4  查看用户权限

```mysql
show grants for user@host
```



5.MySQL中常见的日志有哪些？分别记录什么？

```mysql
1 错误日志   记录mysql服务，在启动运行停止时所出现的问题
2 查询日志   记录建立的客户端的执行和连接语句  
3 二进制日志   记录所有更改的语句（ddl和dml）
4 慢查询日志   记录所有超过阈值（临界值）的查询语句
```



6 刷新日志的方式

```mysql
1 重启mysql
2 在mysql中使用flush logs
3 使用mysqladmin
```



7 数据库系统有哪几部分组成，分别有什么功能？

```mysql
1 数据库：用于存储数据的地方。
2 数据库管理系统：用于管理数据库的软件。
3 数据库应用程序：为了提高数据库系统的处理能力所使用的管理数据库的软件补充
```



8 触发器由事件进行触发，事件包含___、___、___如果定义了触发器，数据库在只执行这三个语句时会触发相应的操作，触发器属于自动执行，不需要手动启动

```mysql
insert、update、delete
```



9 为MySQL设置密码或者修改密码的方式。

```mysql
#方法一
mysqladmin -u root -p123456 password 'abc123'    #比较常用

#方法二（sql语句修改）
update mysql.user set password=password(123456) where user='root' and host='localhost';
   #刷新
flush privileges;


#方法三（sql语句修改）
set password=password('abc123');
```













10 MySQL常见的聚合函数函数？　　

```mysql
AVG(col)返回指定列的平均值
COUNT(col)返回指定列中非NULL值的个数
MIN(col)返回指定列的最小值
MAX(col)返回指定列的最大值
SUM(col)返回指定列的所有值之和
GROUP_CONCAT(col) 返回由属于一组的列值连接组合而成的结果
```



11 MySQL 服务器默认端口是什么 ?

```mysql
	3306
```



12 SQL语言的优势

```mysql
（1） 速度快，相比oracle，db2，等大型数据库来说，运行速度要高于大型数据

（2） 上手简单，易操作

（3） 开源软件，对于大多数人来说是免费的

（4） 移植性强，多个平台都可以使用

（5） 接口丰富，支持c语言，c++，Python，ruby，Java等

（6） 安全性和连续性

（7） 支持查询语言
```



13 InnoDB存储引擎的特性及使用场合

```mysql
（1） 事务类型首选，支持行级别锁定和支持外键，也是5.5版本之后默认存储引擎

（2） 具有提交、回滚、和崩溃恢复能力一致事务安全的存储引擎，能处理高并发的数据，性能较高

（3） 使用InnoDB时，将在数据目录下生成一个名叫做ib_logfile0和ib_logfile1的5M大小的日志文件和10M大小自动扩展到ibdata1文件

（4） 缓存性能高，能缓存数据，也能缓存索引
```



14 运算符分类

```mysql
（1）.算术运算符

（2）.比较运算符

（3）.逻辑运算符

（4）.位操作运算符
```



15 视图和真实表的区别

```mysql
（1）.视图和真实的区别视图是已经编译好的SQL语句，是基于SQL语句的结果集的可视化的表。而表不是。

（2）.视图时虚表，且只占用非常小的物理空间，视图属于逻辑概念

（3）.视图不保存数据，真实表保存数据

（4）.视图属于查看表的方法，属于SQL语句的集合，可以防止用户接触真实数据表，而真实表没有此功能，

（5）.视图的建立和删除只影响本身，不影响对应的基本表
```



16 从数据表中随机取50条数据

```mysql
select * from 表 order by rand() limit50
```



17 索引在什么情况下遵循最左前缀的规则？

```mysql
在建立了联合索引的前提条件下，数据库会一直从左向右的顺序依次查找，直到遇到了范围查询(>,<,between,like等)
```



18 脏读的含义

```mysql
脏读表示在一个事务中所做的操作对其他事物可见
```













19 简述创建外键语法以及要求。

```mysql
语法：[Constraint  外键名]  foreign key (字段名)  references 父表名(父表主键列)

要求：（1）关联的父表列，一定是父表的主键列

（2）关联的父表如果为联合主键时，先关联联合主键中的第一个字段

（3）关联父表时，被关联的外键的数据类型要和父表中主键列数据类型一致
（4） 书写错误
（5） 存储引擎
```



20 索引的优点

```mysql
（1） 加快查询速度

（2） 实现数据完整性，加速表与表之间的联系

（3） 减少分组和排序时间
```



21 索引的缺点

```mysql
（1）  创建索引和维护索引需要时间，随着数据量增多耗费时间越久

（2）  索引占用磁盘空间，如果对于数据量较少的表添加过多索引，有可能索引占用空间要超过数据占用空间

（3）  对于数据进行删除或者修改，索引也要动态维护
```



22 什么是视图？

```mysql
视图是一张虚表，和真实表一样，存在有行和列等数据，视图可以在一个或者多个表中进行导出，mysql在5.0版本之后才开始使用视图，可以用来保障数据安全，且视图一经创建就会存在数据库中。
```



23 视图的使用场景有哪些？

```mysql
查询的数据来源于不同的表，而查询者希望以统一的方式查询，这样也可以建立一个视图，把多个表查询结果联合起来，查询者只需要直接从视图中获取数据，不必考虑数据来源于不同表所带来的差异
```



24 用三种不同的方法创建用户：

```mysql


（1）CREATE USER 用户名@host [identified by [PASSWORD] ‘password’]

（2）  使用grant 创建用户

	GRANT PRIVILEGES ON db.table TO user@host [IDENTIFIED BY ‘password’] 

（3）直接操作user表来添加用户

	INSERT INTO mysql.user(host,user,password) VALUES(‘localhlst’,’user4’,PASSWORD(‘123.com’));

但这种方式创建的用户不能直接登陆，需要flush privileges；之后才可以

 [,user[identified by ‘password’]]  [with grant option]

如果用户不存在，相当于创建用户，如果用户存在，相当于授权
```



25 什么是完整性约束条件？。

```mysql
完整性约束条件：对字段进行限制，要求用户只能向该字段中写入符合条件数据，如果不满足约束条件，数据库将会不执行该操作。
```



26 说出5种约束条件及其作用：

```mysql
约束条件

说明

PRIMARY KEY主键 标识该属性为该表的主键，可以唯一的标识数据

FOREIGN KEY外键 标识该属性为该表的外键，是与之联系的某表的主键

NOT NULL 标识该属性不能为空

UNIQUE 标识该属性值唯一

AUTO_INCREMENT 表示该属性自动增加

DEFAULT 为该属性设置默认值
```



27 复制基本原理流程

```mysql
（1）. 主：binlog线程——记录下所有改变了数据库数据的语句，放进master上的binlog中；
（2）. 从：io线程——在使用start slave 之后，负责从master上拉取 binlog 内容，放进 自己的relay log中；
（3）. 从：sql执行线程——执行relay log中的语句；
```















28 innodb和myisam中select  count(*)哪个更快，为什么

```mysql
myisam更快，因为myisam内部维护了一个计数器，可以直接调取。
```



29 CHAR和VARCHAR的区别？

```mysql
（1）.CHAR和VARCHAR类型在存储和检索方面有所不同
（2）.CHAR列长度固定为创建表时声明的长度，长度值范围是1到255
（3）当CHAR值被存储时，它们被用空格填充到特定长度，检索CHAR值时需删除尾随空格。
```



30 怎样才能找出最后一次插入时分配了哪个自动增量？

```mysql
LAST_INSERT_ID将返回由Auto_increment分配的最后一个值，并且不需要指定表名称。
```



31 列对比运算符是什么？

```mysql
在SELECT语句的列比较中使用=，<>，<=，<，> =，>，<<，>>，<=>，AND，OR或LIKE运算符。
```



32 在Mysql中，使用以下代码查询显示前50行：

```mysql
SELECT * FROM  LIMIT 0,50;
```



33 实践中如何优化MySQL

```mysql
SQL语句及索引的优化

数据库表结构的优化

系统配置的优化

硬件的优化
```


34 简单描述mysql中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）
索引是一种特殊的文件(InnoDB数据表上的索引是表空间的一个组成部分)，它们包含着对数据表里所有记录的引用指针。

```mysql
普通索引(由关键字KEY或INDEX定义的索引)的唯一任务是加快对数据的访问速度。

普通索引允许被索引的数据列包含重复的值。如果能确定某个数据列将只包含彼此各不相同的值，在为这个数据列创建索引的时候就应该用关键字UNIQUE把它定义为一个唯一索引。也就是说，唯一索引可以保证数据记录的唯一性。

主键，是一种特殊的唯一索引，在一张表中只能定义一个主键索引，主键用于唯一标识一条记录，使用关键字 PRIMARY KEY 来创建。

索引可以覆盖多个数据列，如像INDEX(columnA, columnB)索引，这就是联合索引。

索引可以极大的提高数据的查询速度，但是会降低插入、删除、更新表的速度，因为在执行这些写操作时，还要操作索引文件。
```



35 datetime和timestamp区别 

```mysql
Datatime:以 YYYY-MM-DD HH:MM:SS 格式存储时期时间，精确到秒，占用8个字节得存储空间，datatime类型与时区无关
Timestamp:以时间戳格式存储，占用4个字节，范围小1970-1-1到2038-1-19，显示依赖于所指定得时区，默认在第一个列行的数据修改时可以自动得修改timestamp列得值
```



36  NULL是什么意思,怎么判定NULL值

```mysql
答：NULL这个值表示UNKNOWN(未知):它不表示“”(空字符串)。对NULL这个值的任何比较都会生产一个NULL值。您不能把任何值与一个 NULL值进行比较，并在逻辑上希望获得一个答案。

使用IS NULL来进行NULL判断
```













37 说四种以上优化sql语句的方法

```mysql
（1）Where子句中：where表之间的连接必须写在其他Where条件之前，那些可以过滤掉最大数量记录的条件必须写在Where子句的末尾.HAVING最后。

（2）用EXISTS替代IN、用NOT EXISTS替代NOT IN。

（3） 避免在索引列上使用计算

（4）避免在索引列上使用IS NULL和IS NOT NULL

（5）对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。

（6）应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描

（7）应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描
```



38 ENUM和SET区别

```mysql
ENUM在给定的范围内选择一个值，SET在给定的范围内可以选择0个或者多个值
```



39 如果表容量过大会造成的问题？如何解决

```mysql
问题：记录数据过多，单表内容超10G
解决：将单个表拆分为多个表
```



40 共享表空间和独享表空间的区别

```mysql
（1）共享表空间无法简单收缩ibdata1的大小，造成空间浪费生成大量磁盘碎片
（2）独立表空间可以通过optimeze table收缩表空间
（3）独立表空间可以同时向多个文件刷新数据
```



41 锁的作用，有哪些类型

```mysql
锁的作用是管理共享资源的并发访问，用于实现事务隔离性
类型有两类：读锁（共享锁），写锁（排它锁）
```



42 查看当前数据库里有哪些用户

```mysql
mysql> select user,host from mysql.user;
```



43  查看建表结构及表结构的SQL语句

```mysql
mysql> desc test;

mysql> show create table test\G
```



44 MySQL密码丢了，请找回？

```mysql
（1） 先关闭mysql服务

（2） 跳过授权表 mysqld_safe --defaults-file=/etc/my.cnf --skip-grant-tables

（3） 使用--skip-grant-tables启动mysql，忽略授权登陆验证

（4） 登录mysql 
（5） 使用update修改密码
（6） 刷新权限flush privileges;
```



45  什么是MySQL多实例，如何配置MySQL多实例？

```mysql
在一台服务器上，mysql服务开启多个不同的端口，运行多个服务进程，这些mysql服务进程通过不同的socket来监听不同的数据端口，进而互不干涉的提供各自的服务。
```











46  delete和truncate删除数据的区别？

```mysql
truncate table test执行更快，清空物理文件，清空表中的所有内容

delete from test是逻辑删除，按行删除，而且可以通过where语句选择要删除的行
```



47  如何开启从库的binlog功能？

```mysql
在my.cnf文件中写入log-bin=mysql-bin
```



48 MySQL数据库如何实现读写分离？

```mysql
（1）.       通过程序实现读写分离（性能，效率最佳，推荐

PHP和Java程序都可以通过设置多个连接文件轻松的实现对数据库的读写分离，即当select时，就去连接读库的连接文件，当update、insert、delete是就去连接写库的连接文件。

（2）.       通过软件实现读写分离

MySQL-proxy,Amoeba等代理软件也可以实现读写分离功能，但最常用最好用的还是程序实现读写分离。

（3）.       开发dbproxy
```



49 .   MySQL中MyISAM与InnoDB的区别，至少5点

```mysql
（1）.       InnoDB支持事务，而MyISAM不支持事务。

（2）.       InnoDB支持行级锁，而MyISAM支持表级锁

（3）.       InnoDB支持MVCC，而MyISAM不支持

（4）.       InnoDB支持外键，而MyISAM不支持

（5）.       InnoDB不支持全文索引，而MyISAM支持
```



50 如何自定义脚本启动MySQL(

```mysql
mysqld_safe  --defaults-file=/etc/my.cnf 
```



51 存储过程与触发器的区别

```mysql
存储过程和触发器都是SQL语句集；触发器不可用CALL调用，而是在用户执行某些语句后自动调用；
```



52 说出获取整数的函数

```mysql
  CEIL(X)，CEILING（X） 返回不小于x，且最接近x的整数

  FLOOR(X) 返回不大于x，且最接近x的整数
```



53 你怎么看到为表格定义的所有索引？	

```mysql
SHOW INDEX FROM <tablename>;
```



54 每个表最少可以创建多少个索引？

```mysql
任何标准表至少可以创建16个索引列。
```











55 为表中得字段选择合适得数据类型

```mysql
字段类型优先级: 整形>date,time>enum,char>varchar>blob,text
优先考虑数字类型，其次是日期或者二进制类型，最后是字符串类型，同级别得数据类型，应该优先选择占用空间小的数据类型
```



56 为数据表建立索引的原则有哪些？

```mysql
1 索引并不是越多越好
2 数据量少的表最好不要创建索引
3 对于经常更新数据的字段来说不要创建索引
4 在不同值较多的列创建索引
5 当唯一性是某个数据特征时，创建唯一索引
6 在频繁排序的列上创建索引
```



57.什么情况下不宜建立索引？

```mysql
#对于查询中很少涉及的列或者重复值比较多的列，不宜建立索引。

对于一些特殊的数据类型，不宜建立索引，比如文本字段（text）等
```



58 SQL语言包括哪几部分？每部分都有哪些操作关键字？

```mysql
SQL语言包括数据定义(DDL)、数据操纵(DML),数据控制(DCL)和数据查询（DQL）四个部分。

数据定义：Create Table,Alter Table,Drop Table, Craete/Drop Index等

数据操纵：insert,update,delete,

数据控制：grant,revoke

数据查询：select
```



59 主键、外键和索引的区别？

```mysql
#主键、外键和索引的区别

定义：
#1 主键–唯一标识一条记录，不能有重复的，不允许为空
#2 外键–表的外键是另一表的主键, 外键可以有重复的, 可以是空值
#3 索引–该字段没有重复值，但可以有一个空值

作用：
#1 主键–用来保证数据完整性
#2 外键–用来和其他表建立联系用的
#3 索引–是提高查询排序的速度

个数：
#1 主键–主键只能有一个
#2 外键–一个表可以有多个外键
#3 索引–一个表可以有多个唯一索引
```



60  开启MySQL服务

```mysql
service mysqld start

/init.d/mysqld start

mysqld_safe &
```



61 逻辑运算符

```mysql
逻辑非 NOT 或者！
逻辑与 AND 或者 &&
逻辑或 OR  或者 ||
逻辑异或  XOR
```



62 视图在什么情况下不能被更新 

```mysql
1 视图中不包含基本表中被定义为非空的列
2 视图中select语句后面的字段中使用了数学表达式
3 视图中select语句后使用了聚合函数不能被更新
4 视图中select语句后使用了union\group by\having不能被更新
```


